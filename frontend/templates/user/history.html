<!DOCTYPE html>
<html>
<head>
  <title>Prediction History | Medica</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

{% include "layout/header.html" %}

<div class="dashboard-container">

  <div class="dashboard-header">
    <h2>Prediction History</h2>
    <p>
      Review all previous AI risk assessments and treatment comparisons.
    </p>
  </div>

  <!-- TOTAL COUNT -->
  <div class="dashboard-card" style="margin-bottom:20px;">
    <h3>Total Predictions</h3>
    <h1 style="color:#0b5ed7">{{ total_predictions }}</h1>
  </div>

  <!-- TABLE -->
  <div class="dashboard-card">

    {% if records %}

    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="background:#0b5ed7; color:white;">
          <th style="padding:10px;">Date</th>
          <th>Risk Score</th>
          <th>Risk Tier</th>
          <th>No Antibiotic</th>
          <th>With Antibiotic</th>
        </tr>
      </thead>

      <tbody>
        {% for r in records %}
        <tr style="border-bottom:1px solid #eee;">
          <td style="padding:10px;">
            {{ r.created_at.strftime("%d %b %Y %H:%M") }}
          </td>
          <td>{{ r.risk_score }}</td>
          <td>
            {% if r.risk_tier == "HIGH" %}
              <span style="color:red;">{{ r.risk_tier }}</span>
            {% elif r.risk_tier == "MODERATE" %}
              <span style="color:orange;">{{ r.risk_tier }}</span>
            {% else %}
              <span style="color:green;">{{ r.risk_tier }}</span>
            {% endif %}
          </td>
          <td>{{ r.risk_no_antibiotic }}</td>
          <td>{{ r.risk_with_antibiotic }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    {% else %}
      <p>No predictions found.</p>
    {% endif %}

  </div>

</div>

<footer>
  © 2026 Medica – AI Clinical Decision Support
</footer>

</body>
</html>
